@startuml
participant ":VirtualGateway" as VG

participant "meshgateway:MeshnetworkGateway" as VG
participant "routing:ChildTableTree" as routing
participant "engine:RosDroneEngineConnector" as engine
participant "communication:VirtualNRF24" as NRF24
participant "meshnetworkRouter:MeshnetworkRouter" as MG

VG -> VG : Load(physics::ModelPtr _parent,\nsdf::ElementPtr _sdf)
note over VG : Get the nodeID,\ndroneID and debug\n from SDF

create routing
VG -> routing : <<create>> ChildTableTree( )
create engine
VG -> engine : <<create>> RosDroneEngineConnector( droneID )
create NRF24
VG -> NRF24 : <<create>> VirtualNRF24( )
create MG
VG -> MG : <<create>> MeshnetworkRouter( nodeID, droneID, debug, routing, engine, NRF24 )
VG -> MG : init()
@enduml