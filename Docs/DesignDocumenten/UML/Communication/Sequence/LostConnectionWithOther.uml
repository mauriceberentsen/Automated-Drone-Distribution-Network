@startuml
autonumber
participant "Node 1:MeshComponent" as 1
participant "missing:MissingMessage" as 1m
participant "routerTech:IRoutingTechnique" as 1NT
note over 1NT: Table that knows\nthe route towards 2
participant "communication:IWirelessCommunication" as IWS
note over IWS: Interface for wireless communication
participant "child:MeshComponent" as 2



1-> 1  : informAboutMissingChild(parent, missing)
activate 1
1 -> 1NT : family = getSetOfChildren()
loop child : family
alt parent == child
1 -> 1 : continue
note over 1: We don't want to \nsend a message back\nto the one that told us.
end
1 -> 1NT ++: towards = NodeTable.getDirectionToNode(child) : uint8_t
return towards 
create 1m
1 -> 1m ++: \t\t\t<<create>>\n msg = HeartbeatMessage(nodeID, nodeID, towards,\n child, missing)
1 -> 1 : connectedToGateway = false
1 -> 1 ++ : send_message(msg, towards) : bool
1 -> IWS++ : SendMessageTo( msg )
IWS --> 2 +: OnMsg(msg)
2->2 : processMissing
1 <- IWS --: succes : bool
deactivate 1m
end

deactivate 1
deactivate 1





@enduml