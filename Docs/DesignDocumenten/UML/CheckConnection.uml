@startuml


start

:checkConnection;
while (rosnode -> ok() ) is (true)
	if (on) then ([false])
    elseif ([true])
    	:sendHeartbeatToAllChilderen;
    	:searchOtherNodesInRange;
    else ([false])
    	if (connectedToGateway) then ([true])
    		if(knowPrefferedGatewayLocation) then ([false])
    			:requestLocation(prefferedGateway);
			endif
    	:sendHeartbeatToGateway;
    	else (false)
		endif
    endif
    :sleep;
endwhile (false)
stop


@enduml